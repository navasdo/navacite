<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" type="image/x-icon" href="https://raw.githubusercontent.com/navasdo/navacite/main/templates/static/ico/navacite.ico">
    <a href="https://navacite.com" class="absolute top-4 right-4 z-50 p-1 rounded-full bg-gray-700/50 hover:bg-gray-600/50 transition" title="Back to the Library"><img src="https://raw.githubusercontent.com/navasdo/navacite/refs/heads/main/templates/static/navacite-images/Navacite-Main.png" alt="Back to Library" class="w-10 h-10 rounded-full"/></a>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cochlea Compass</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        html { scroll-behavior: smooth; }
        .filter-label, .story-btn { transition: all 0.2s ease-in-out; cursor: pointer; }
        .filter-label:hover, .story-btn:hover { background-color: #3e2e6b; }
        
        /* Level Selection Buttons */
        input.level-checkbox:checked + .filter-label {
            background-color: #7c3aed;
            border-color: #a78bfa;
            color: #ffffff;
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(167, 139, 250, 0.5);
        }
        input.level-checkbox:disabled + .filter-label {
            cursor: not-allowed;
            background-color: #2c2a38;
            color: #6b7280;
            opacity: 0.6;
        }
        input[type="checkbox"] { display: none; }
        
        /* Story Selection Buttons */
        .story-btn.selected {
            background-color: #5b21b6; /* violet-700 */
            border-color: #a78bfa; /* violet-400 */
            color: #ffffff;
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(167, 139, 250, 0.4);
        }

        /* Assessment Modal Styles */
        #assessment-modal, #report-modal {
            background-color: rgba(12, 10, 24, 0.9);
            backdrop-filter: blur(8px);
        }
        .score-btn {
            transition: all 0.2s ease-in-out;
        }
        .score-btn.selected {
            transform: scale(1.1);
            box-shadow: 0 0 10px rgba(255,255,255,0.5);
        }
    </style>
</head>
<body class="bg-[#0c0a18] min-h-screen font-sans text-slate-300 flex flex-col items-center p-4 sm:p-6 lg:p-8 overflow-x-hidden">

    <header class="w-full max-w-5xl mx-auto my-8">
        <div class="text-center pt-8">
            <img
              src="https://raw.githubusercontent.com/navasdo/navacite/refs/heads/main/templates/static/navacite-images/navacite-cochlea.png"
              alt="Navacite Cochlea Compass Visual"
              class="w-48 mx-auto mb-4 [filter:drop-shadow(0_0_15px_rgba(255,255,255,0.3))]"
              onerror="this.onerror=null; this.src='https://placehold.co/192x108/0c0a18/a78bfa?text=Navacite-Main';"
            />
            <h1 class="text-5xl md:text-6xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-violet-400 to-fuchsia-500">
            Cochlea Compass
            </h1>
        </div>
    </header>

    <main class="w-full max-w-5xl mx-auto flex-grow">
        
        <div id="story-selection-container" class="mb-8">
            <!-- Story buttons will be dynamically inserted here -->
        </div>
        
        <div id="filter-container" class="mb-12 p-6 bg-slate-900/40 rounded-2xl border border-violet-900/80">
            <p class="text-center text-slate-400 mb-6">Cochlea Compass is designed to measure how well students understand what they hear. It checks their ability to focus on spoken passages, remember key details, and grasp the main idea. Students answer questions that test memory, sequencing, and deeper thinking - like making inferences or predictions.<br><br> Choose a <b>Listening Difficulty Level</b> ranging from 0~15, choose a passage, and click <b>Begin</b>. You may select up to 3 difficulty levels and a maximum of 5 stories.</p>
            <div>
                <h3 class="text-xl font-bold text-violet-400 mb-4 text-center">Listening Difficulty Level</h3>
                <div id="level-filters" class="grid grid-cols-4 md:grid-cols-8 gap-2">
                    <!-- Level buttons will be dynamically inserted here -->
                </div>
            </div>
            <div class="text-center mt-8">
                <button id="begin-assessment-btn" class="bg-violet-600 hover:bg-violet-700 text-white font-bold py-3 px-8 rounded-lg transition-all duration-300 disabled:bg-slate-600 disabled:cursor-not-allowed disabled:opacity-50" disabled>
                    Begin Assessment
                </button>
            </div>
        </div>

    </main>
    
    <!-- Assessment Modal -->
    <div id="assessment-modal" class="hidden fixed inset-0 z-40 flex items-center justify-center p-4">
        <div class="bg-slate-900 w-full max-w-4xl h-[90vh] max-h-[1000px] rounded-2xl border border-violet-700 shadow-2xl shadow-violet-500/20 flex flex-col p-6 relative overflow-hidden">
            <button id="close-assessment-btn" class="absolute top-4 right-4 text-white bg-slate-700 rounded-full h-8 w-8 flex items-center justify-center hover:bg-red-500 transition-colors z-10 text-2xl">&times;</button>
            
            <h2 id="passage-title" class="text-3xl font-bold text-center text-violet-400 mb-4"></h2>
            
            <!-- Audio Controls -->
            <div class="flex items-center justify-between gap-4 p-4 mb-4 bg-slate-800/50 rounded-lg">
                <button id="replay-btn" class="p-2 rounded-full hover:bg-slate-700 transition">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-violet-400"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path></svg>
                </button>
                <div class="flex items-center gap-2">
                    <button id="play-btn" class="p-3 rounded-full bg-violet-600 hover:bg-violet-700 transition shadow-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="currentColor" class="text-white"><path d="M8 5v14l11-7z"></path></svg>
                    </button>
                    <button id="pause-btn" class="hidden p-3 rounded-full bg-violet-600 hover:bg-violet-700 transition shadow-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="currentColor" class="text-white"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path></svg>
                    </button>
                </div>
                <div id="audio-duration" class="text-sm text-slate-400 font-mono w-24 text-center">0:00 / 0:00</div>
            </div>
            
            <!-- Passage & Questions -->
            <div class="flex-grow overflow-y-auto pr-2">
                <div id="passage-text" class="bg-slate-800/30 p-4 rounded-lg mb-4 whitespace-pre-wrap text-slate-300"></div>
                <div id="questions-container"></div>
            </div>

            <!-- Notes & Navigation -->
            <div class="mt-4 pt-4 border-t border-slate-700">
                 <textarea id="clinician-notes" class="w-full bg-slate-800/50 rounded-lg p-2 text-sm placeholder-slate-500" placeholder="Clinician Notes..."></textarea>
                 <div class="flex justify-end mt-4">
                    <button id="next-submit-btn" class="bg-violet-600 hover:bg-violet-700 text-white font-bold py-2 px-6 rounded-lg transition">Next Passage</button>
                 </div>
            </div>
        </div>
    </div>
    
    <!-- Report Modal -->
    <div id="report-modal" class="hidden fixed inset-0 z-40 flex items-center justify-center p-4">
        <div class="bg-slate-900 w-full max-w-4xl h-[90vh] max-h-[1000px] rounded-2xl border border-violet-700 shadow-2xl shadow-violet-500/20 flex flex-col p-6 relative">
             <button id="close-report-btn" class="absolute top-4 right-4 text-white bg-slate-700 rounded-full h-8 w-8 flex items-center justify-center hover:bg-red-500 transition-colors z-10 text-2xl">&times;</button>
            <h2 class="text-3xl font-bold text-center text-violet-400 mb-4">Assessment Report</h2>
            <div id="report-content" class="flex-grow overflow-y-auto pr-2 text-slate-300"></div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirm-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-filter backdrop-blur-sm">
        <div class="bg-slate-800 rounded-lg p-6 text-center shadow-lg border border-violet-700">
            <p class="text-white mb-4">Remind the student they can only hear this once.<br>The replay button is available if necessary.</p>
            <button id="confirm-ok-btn" class="bg-violet-600 hover:bg-violet-700 text-white font-bold py-2 px-8 rounded-lg">OK</button>
        </div>
    </div>


    <footer class="w-full max-w-3xl mx-auto mt-24 mb-8 text-center text-sm text-slate-500 p-6 border-t border-slate-800/50">
        <p class="font-bold text-violet-400">&copy; 2025 Navacite | All Rights Reserved</p>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', async () => {
        const audioBasePath = 'https://raw.githubusercontent.com/navasdo/navacite/refs/heads/main/templates/language-tools/cochlea-compass/audio/';
        
        const passageData = {
            "0": [
                {
    "audioId": "3ofVHAq6",
    "title": "The Sun",
    "text": "The sun is high in the sky. It is bright and warm. Children play outside in the sun. Flowers open in the sun. The sun gives light for the day.",
    "questions": [
      {
        "type": "Detail",
        "text": "What is high in the sky?",
        "answers": "sun, the sun"
      },
      {
        "type": "Detail",
        "text": "What do flowers do in the sun?",
        "answers": "open, open up"
      },
      {
        "type": "Inference",
        "text": "Why do children play outside?",
        "answers": "it is sunny, sun, warm, bright"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "sun, the sun"
      }
    ]
  },
  {
    "audioId": "EEpUMAAX",
    "title": "Little Cat",
    "text": "A little cat sits on a mat. The cat looks at a ball. The ball rolls, and the cat runs. The cat jumps and plays with the ball.",
    "questions": [
      {
        "type": "Detail",
        "text": "What does the cat sit on?",
        "answers": "mat, a mat, the mat"
      },
      {
        "type": "Detail",
        "text": "What rolls?",
        "answers": "ball, a ball, the ball"
      },
      {
        "type": "Sequence",
        "text": "What happens after the ball rolls?",
        "answers": "cat runs, the cat runs"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "cat, little cat"
      }
    ]
  },
  {
    "audioId": "1U4ETYF9",
    "title": "Anna's Red Apple",
    "text": "Anna eats a red apple. She takes a big bite. The apple is sweet and crisp. Apples grow on trees in the fall.",
    "questions": [
      {
        "type": "Detail",
        "text": "What does Anna eat?",
        "answers": "apple, red apple"
      },
      {
        "type": "Detail",
        "text": "Where do apples grow?",
        "answers": "trees, on trees"
      },
      {
        "type": "Vocabulary",
        "text": "What does crisp mean here?",
        "answers": "crunchy, hard, not soft"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "apple, apples"
      }
    ]
  },
  {
    "audioId": "eAa0WHGO",
    "title": "The Park",
    "text": "Children run in the park. They swing on swings. They slide down the slide. They laugh and play in the warm day.",
    "questions": [
      {
        "type": "Detail",
        "text": "Where do the children play?",
        "answers": "park, in the park"
      },
      {
        "type": "Detail",
        "text": "What do they swing on?",
        "answers": "swings"
      },
      {
        "type": "Detail",
        "text": "What do they slide down?",
        "answers": "slide"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "park, children in park"
      }
    ]
  },
  {
    "audioId": "08WB79PA",
    "title": "The Dog's Stick",
    "text": "A dog finds a stick. He picks it up and runs. A boy throws the stick. The dog runs fast and brings it back.",
    "questions": [
      {
        "type": "Detail",
        "text": "What does the dog find?",
        "answers": "stick, a stick"
      },
      {
        "type": "Detail",
        "text": "Who throws the stick?",
        "answers": "boy, a boy, the boy"
      },
      {
        "type": "Sequence",
        "text": "What does the dog do after the boy throws the stick?",
        "answers": "runs, brings it back, fetches"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "dog, stick, dog and stick"
      }
    ]
  },
  {
    "audioId": "Fo13mTHJ",
    "title": "Ben & Mom",
    "text": "Ben and Mom make cookies. They mix sugar and flour. They put the dough on a pan. The oven bakes the cookies. The cookies smell good.",
    "questions": [
      {
        "type": "Detail",
        "text": "Who makes cookies?",
        "answers": "Ben and Mom"
      },
      {
        "type": "Detail",
        "text": "What do they mix?",
        "answers": "sugar and flour"
      },
      {
        "type": "Sequence",
        "text": "What happens after they put dough on the pan?",
        "answers": "oven bakes, baking, cookies bake"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "cookies, making cookies"
      }
    ]
  },
  {
    "audioId": "J9DVHX4L",
    "title": "The Big Truck",
    "text": "A big truck drives down the road. The wheels turn round and round. The driver honks the horn. People wave at the big truck.",
    "questions": [
      {
        "type": "Detail",
        "text": "What drives down the road?",
        "answers": "truck, big truck"
      },
      {
        "type": "Detail",
        "text": "What does the driver honk?",
        "answers": "horn"
      },
      {
        "type": "Inference",
        "text": "Why do people wave?",
        "answers": "big truck, they see the truck"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "truck, big truck"
      }
    ]
  },
  {
    "audioId": "wM6tlqyL",
    "title": "The Bird",
    "text": "A bird builds a nest in a tree. She lays eggs in the nest. The eggs crack, and baby birds come out. The bird feeds her babies.",
    "questions": [
      {
        "type": "Detail",
        "text": "Where does the bird build a nest?",
        "answers": "tree, in a tree"
      },
      {
        "type": "Detail",
        "text": "What comes out of the eggs?",
        "answers": "baby birds, birds"
      },
      {
        "type": "Sequence",
        "text": "What does the bird do after babies hatch?",
        "answers": "feeds them, feed babies"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "birds, nest, bird's nest"
      }
    ]
  },
  {
    "audioId": "w4mgi6g9",
    "title": "Little Fish",
    "text": "A little fish swims in the pond. It moves fast in the water. The fish blows bubbles. Ducks swim on the pond too.",
    "questions": [
      {
        "type": "Detail",
        "text": "Where does the fish swim?",
        "answers": "pond, in pond"
      },
      {
        "type": "Detail",
        "text": "What does the fish blow?",
        "answers": "bubbles"
      },
      {
        "type": "Detail",
        "text": "What also swims on the pond?",
        "answers": "ducks"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "fish, little fish"
      }
    ]
  },
  {
    "audioId": "y9uozVFJ",
    "title": "Sam's School Day",
    "text": "Sam puts on his backpack. He rides the bus to school. He sits with friends. They read books and draw pictures in class.",
    "questions": [
      {
        "type": "Detail",
        "text": "What does Sam put on?",
        "answers": "backpack"
      },
      {
        "type": "Detail",
        "text": "How does he go to school?",
        "answers": "bus, rides bus"
      },
      {
        "type": "Detail",
        "text": "What does he do in class?",
        "answers": "read, draw, read books, draw pictures"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "school, going to school"
      }
    ]
  },
  {
    "audioId": "ZKWkdl1U",
    "title": "Washing the Car",
    "text": "Kim helps Dad wash the car. She sprays water with the hose. They scrub the car with soap. The car shines in the sun.",
    "questions": [
      {
        "type": "Detail",
        "text": "Who helps Dad?",
        "answers": "Kim"
      },
      {
        "type": "Detail",
        "text": "What do they wash?",
        "answers": "car"
      },
      {
        "type": "Detail",
        "text": "What do they scrub with?",
        "answers": "soap"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "washing car, helping dad"
      }
    ]
  },
  {
    "audioId": "ii4xTyKD",
    "title": "The Red Ball",
    "text": "A red ball bounces on the ground. It rolls under a bench. A girl runs to get it. She throws it to her friend.",
    "questions": [
      {
        "type": "Detail",
        "text": "What bounces on the ground?",
        "answers": "red ball, ball"
      },
      {
        "type": "Detail",
        "text": "Where does it roll?",
        "answers": "under bench"
      },
      {
        "type": "Detail",
        "text": "Who runs to get it?",
        "answers": "girl"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "ball, red ball"
      }
    ]
  },
  {
    "audioId": "Rwl2hFib",
    "title": "The Zoo",
    "text": "Lions roar at the zoo. Monkeys swing on ropes. Kids watch the animals. They eat lunch on a bench and see more animals.",
    "questions": [
      {
        "type": "Detail",
        "text": "What roars?",
        "answers": "lions"
      },
      {
        "type": "Detail",
        "text": "What swings on ropes?",
        "answers": "monkeys"
      },
      {
        "type": "Detail",
        "text": "Where do kids eat lunch?",
        "answers": "bench"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "zoo, animals, zoo visit"
      }
    ]
  },
  {
    "audioId": "Fm4Zdgcm",
    "title": "Max's Bedtime",
    "text": "Max puts on pajamas. Mom reads him a story. He hugs his bear and lies down. The lights go out. Max goes to sleep.",
    "questions": [
      {
        "type": "Detail",
        "text": "What does Max put on?",
        "answers": "pajamas"
      },
      {
        "type": "Detail",
        "text": "What does Mom read?",
        "answers": "story"
      },
      {
        "type": "Detail",
        "text": "What does Max hug?",
        "answers": "bear, teddy bear"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "bedtime, sleep, Max bedtime"
      }
    ]
  }
],
            "1": [
                 {
    "audioId": "Dkeh4lak",
    "title": "Rain",
    "text": "Rain falls from the clouds. Kids wear boots and splash in puddles. The rain helps the grass grow. The rain makes the air cool and fresh.",
    "questions": [
      {
        "type": "Detail",
        "text": "What falls from the clouds?",
        "answers": "rain"
      },
      {
        "type": "Detail",
        "text": "What do kids splash in?",
        "answers": "puddles"
      },
      {
        "type": "Inference",
        "text": "Why does the grass grow?",
        "answers": "rain, from rain, because of rain"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "rain, rainy day"
      }
    ]
  },
  {
    "audioId": "u2CqeVob",
    "title": "The Moon & Stars",
    "text": "At night, the moon shines. It looks round and bright. Stars twinkle in the dark sky. The moon lights the way for animals and people.",
    "questions": [
      {
        "type": "Detail",
        "text": "What shines at night?",
        "answers": "moon, the moon"
      },
      {
        "type": "Detail",
        "text": "What twinkles in the dark sky?",
        "answers": "stars"
      },
      {
        "type": "Detail",
        "text": "When does the moon shine?",
        "answers": "At night"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "moon, night, moon at night"
      }
    ]
  },
  {
    "audioId": "5gIVLCkP",
    "title": "The Train",
    "text": "A train moves on the tracks. The engine pulls many cars. The whistle blows loud. People ride the train to the city.",
    "questions": [
      {
        "type": "Detail",
        "text": "What moves on tracks?",
        "answers": "train"
      },
      {
        "type": "Detail",
        "text": "What pulls many cars?",
        "answers": "engine"
      },
      {
        "type": "Detail",
        "text": "What does the whistle do?",
        "answers": "blows, loud"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "train, riding train"
      }
    ]
  },
  {
    "audioId": "GT6Wyo4zu",
    "title": "The Library Visit",
    "text": "Sara walks into the library with her dad. She sees rows of books on shelves. Some books are tall, and some are small. Sara picks a storybook and sits in a chair. Her dad reads with her. The library is quiet and full of stories.",
    "questions": [
      {
        "type": "Detail",
        "text": "Who goes to the library with Sara?",
        "answers": "her dad, dad"
      },
      {
        "type": "Detail",
        "text": "What does Sara pick?",
        "answers": "book, storybook"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "library, reading books, visit to library"
      },
      {
        "type": "Inference",
        "text": "Why is the library quiet?",
        "answers": "so people can read, reading place"
      }
    ]
  },
  {
    "audioId": "tTpawo67c",
    "title": "The Busy Squirrel",
    "text": "In fall, a squirrel looks for nuts. He runs up and down trees. He hides acorns in the ground to eat later. His tail twitches as he works quickly. The squirrel wants to be ready for the cold winter when food is harder to find.",
    "questions": [
      {
        "type": "Detail",
        "text": "What does the squirrel hide?",
        "answers": "acorns, nuts"
      },
      {
        "type": "Detail",
        "text": "When does he look for nuts?",
        "answers": "fall, autumn"
      },
      {
        "type": "Inference",
        "text": "Why does the squirrel work fast?",
        "answers": "to get ready for winter, to store food"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "squirrel, busy squirrel, squirrel getting ready"
      }
    ]
  },
  {
    "audioId": "dEdVyymGZ",
    "title": "The Little Dog",
    "text": "A little dog runs in the yard. He chases his tail and barks at birds. A ball rolls across the grass, and he fetches it. His owner pets him and gives him a treat. The dog wags his tail happily, glad to play outside.",
    "questions": [
      {
        "type": "Detail",
        "text": "What does the dog chase?",
        "answers": "tail"
      },
      {
        "type": "Detail",
        "text": "What does the dog fetch?",
        "answers": "ball"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "dog, little dog, playing dog"
      },
      {
        "type": "Inference",
        "text": "How does the dog feel?",
        "answers": "happy, glad, excited"
      }
    ]
  },
  {
    "audioId": "d1EvLrrDA",
    "title": "The Farm Visit",
    "text": "Jason visits a farm. He sees cows, pigs, and chickens. A farmer shows him how to collect eggs. Jason feeds hay to the cows. The animals make sounds, and the barn smells of hay. Jason learns that farms give us food every day.",
    "questions": [
      {
        "type": "Detail",
        "text": "What animals does Jason see?",
        "answers": "cows, pigs, chickens"
      },
      {
        "type": "Detail",
        "text": "What does Jason collect?",
        "answers": "eggs"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "farm, visiting farm"
      },
      {
        "type": "Inference",
        "text": "What do farms give us?",
        "answers": "food, milk, eggs"
      }
    ]
  },
  {
    "audioId": "jFRe4ZkPq",
    "title": "The Lost Shoe",
    "text": "Liam runs fast at the park. His shoe falls off in the grass. He looks around and finds it under the swing. He ties the laces tight this time. Then he runs back to his friends, happy to keep playing the game.",
    "questions": [
      {
        "type": "Detail",
        "text": "What falls off Liam’s foot?",
        "answers": "shoe"
      },
      {
        "type": "Detail",
        "text": "Where does he find it?",
        "answers": "grass, under swing"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "lost shoe, Liam losing shoe"
      },
      {
        "type": "Inference",
        "text": "How does Liam feel after finding it?",
        "answers": "happy, glad, proud"
      }
                    ]
                }
            ],
            "2": [
                {
    "audioId": "WbhYC1qc",
    "title": "Tom's Blocks",
    "text": "Tom stacks blocks high. The tower gets taller and taller. The blocks fall down with a crash. Tom laughs and starts again.",
    "questions": [
      {
        "type": "Detail",
        "text": "What does Tom stack?",
        "answers": "blocks"
      },
      {
        "type": "Detail",
        "text": "What happens to the tower?",
        "answers": "falls, crash, fall down"
      },
      {
        "type": "Inference",
        "text": "How does Tom feel after it falls?",
        "answers": "laughs, happy, fun"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "blocks, playing blocks"
      }
    ]
  },
  {
    "audioId": "bpvKDkzY",
    "title": "Falling Snow",
    "text": "Snow falls to the ground. Kids wear hats and mittens. They make a snowman with a carrot nose. They throw snowballs and play outside.",
    "questions": [
      {
        "type": "Detail",
        "text": "What falls to the ground?",
        "answers": "snow"
      },
      {
        "type": "Detail",
        "text": "What do kids make?",
        "answers": "snowman"
      },
      {
        "type": "Detail",
        "text": "What do kids throw?",
        "answers": "snowballs"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "snow, snow day"
      }
    ]
  },
  {
    "audioId": "hEQkgWX1",
    "title": "The Garden",
    "text": "Flowers grow in the garden. Bees buzz and visit the flowers. Butterflies fly over the plants. The garden is full of color.",
    "questions": [
      {
        "type": "Detail",
        "text": "What grows in the garden?",
        "answers": "flowers"
      },
      {
        "type": "Detail",
        "text": "What buzzes?",
        "answers": "bees"
      },
      {
        "type": "Detail",
        "text": "What flies over plants?",
        "answers": "butterflies"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "garden, flowers, bees, butterflies"
      }
    ]
  },
  {
    "audioId": "5Wphiavr",
    "title": "The Busy Ants",
    "text": "Ants work hard in their hill. They carry crumbs and tiny leaves. Each ant has a job. Some dig tunnels, and others bring food. Together they keep the colony strong. Even though ants are small, they can do big things when they work as a team.",
    "questions": [
      {
        "type": "Detail",
        "text": "What do ants carry?",
        "answers": "crumbs, leaves, food"
      },
      {
        "type": "Detail",
        "text": "Where do ants live?",
        "answers": "hill, ant hill, colony"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "ants, busy ants, how ants work"
      },
      {
        "type": "Inference",
        "text": "Why can ants do big things?",
        "answers": "they work together, team work, help each other"
      }
    ]
  },
  {
    "audioId": "8vxCpCFD",
    "title": "A Rainy Walk",
    "text": "Maya wears her boots and raincoat. She walks with her mom in the rain. Puddles splash as they step. Maya holds an umbrella, but she likes to feel drops on her hands. The rain makes the ground wet and helps the flowers grow.",
    "questions": [
      {
        "type": "Detail",
        "text": "What does Maya wear?",
        "answers": "boots, raincoat, umbrella"
      },
      {
        "type": "Detail",
        "text": "Who walks with Maya?",
        "answers": "her mom, mom"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "rainy walk, walking in rain, Maya in rain"
      },
      {
        "type": "Inference",
        "text": "Why does the rain help flowers?",
        "answers": "it gives water, rain makes them grow"
      }
    ]
  },
  {
    "audioId": "aH5f8crm0",
    "title": "Planting Seeds",
    "text": "Leo digs holes in the soil. He drops seeds inside and covers them with dirt. He waters the garden each day. Soon small green sprouts appear. With sun, rain, and care, the sprouts grow taller. Leo is excited to see his plants grow strong.",
    "questions": [
      {
        "type": "Detail",
        "text": "What does Leo put in the soil?",
        "answers": "seeds"
      },
      {
        "type": "Detail",
        "text": "What grows from the seeds?",
        "answers": "sprouts, plants, green plants"
      },
      {
        "type": "Sequence",
        "text": "What does Leo do after planting?",
        "answers": "waters them, waters garden, cares for plants"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "planting seeds, growing plants, Leo planting"
      }
    ]
  },
  {
    "audioId": "6eOCsH3w7",
    "title": "The Birthday Party",
    "text": "Eli has a birthday party. Friends come with gifts and balloons. They play games, eat cake, and sing. Eli blows out the candles and makes a wish. Everyone claps and cheers. It is a happy day that Eli will always remember.",
    "questions": [
      {
        "type": "Detail",
        "text": "What does Eli blow out?",
        "answers": "candles"
      },
      {
        "type": "Detail",
        "text": "What do friends bring?",
        "answers": "gifts, balloons, presents"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "birthday party, Eli's party, Eli's birthday"
      },
      {
        "type": "Inference",
        "text": "How does Eli feel?",
        "answers": "happy, excited, glad"
      }
    ]
  },
  {
    "audioId": "7M5tKWKrF",
    "title": "Helping Grandma",
    "text": "Nina helps her grandma bake bread. They mix flour, water, and yeast. The dough rises and grows soft. The kitchen smells warm and tasty. When the bread is done, they eat it with butter. Nina feels proud to help and share the food.",
    "questions": [
      {
        "type": "Detail",
        "text": "Who helps bake bread?",
        "answers": "Nina, granddaughter"
      },
      {
        "type": "Detail",
        "text": "What do they eat the bread with?",
        "answers": "butter"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "helping grandma, baking bread"
      },
      {
        "type": "Inference",
        "text": "How does Nina feel?",
        "answers": "proud, happy, glad to help"
      }
    ]
  },
  {
    "audioId": "WlRJYW0Y8",
    "title": "The Picnic",
    "text": "On a sunny day, a family has a picnic. They spread a blanket on the grass. They eat sandwiches, fruit, and cookies. Birds sing in the trees. After lunch, they play tag and throw a ball. Everyone has fun together outside.",
    "questions": [
      {
        "type": "Detail",
        "text": "What do they eat?",
        "answers": "sandwiches, fruit, cookies"
      },
      {
        "type": "Detail",
        "text": "What do birds do?",
        "answers": "sing"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "picnic, family picnic"
      },
      {
        "type": "Inference",
        "text": "How do they feel?",
        "answers": "happy, glad, fun together"
      }
    ]
  },
  {
    "audioId": "rRbUewjzq",
    "title": "The Classroom",
    "text": "In the classroom, students sit at desks. The teacher writes on the board. Children raise their hands to answer questions. They read books and draw pictures. At the end of the day, they pack their bags. School is a place to learn and grow.",
    "questions": [
      {
        "type": "Detail",
        "text": "Where do students sit?",
        "answers": "desks"
      },
      {
        "type": "Detail",
        "text": "What does the teacher write on?",
        "answers": "board"
      },
      {
        "type": "Main Idea",
        "text": "What is the passage mostly about?",
        "answers": "classroom, learning at school"
      },
      {
        "type": "Inference",
        "text": "Why do children raise hands?",
        "answers": "answer questions, take turns"
      }
    ]
  },
  {
    "audioId": "3G0cgw8RPJ",
    "title": "The New Puppy",
    "text": "Lily’s family adopted a golden retriever puppy from the shelter. They named him Max. At first, he was shy and hid under the couch. Soon he wagged his tail and chased a ball across the living room. Everyone laughed at his energy.",
    "questions": [
      {
        "type": "Explicit",
        "text": "What kind of pet did Lily’s family get?",
        "answers": "a puppy, a dog"
      },
      {
        "type": "Detail",
        "text": "What did they name the puppy?",
        "answers": "Max"
      },
      {
        "type": "Explicit",
        "text": "How did the family react to Max playing?",
        "answers": "They laughed"
      }
                    ]
                }
            ],
            "3": [
                {
                    "audioId": "kLp8dFzH", "title": "The Park", "text": "The park is a fun place to go. There is a tall slide and a swing set. Children laugh and play on the playground. There are big trees for shade. People have picnics on the soft grass.",
                    "questions": [
                        { "type": "Detail", "text": "What is on the playground?", "answers": "slide, swing set, slide and swing set" },
                        { "type": "Detail", "text": "What do people do on the grass?", "answers": "have picnics" },
                        { "type": "Inference", "text": "Why are there trees in the park?", "answers": "for shade, to keep cool" },
                        { "type": "Main Idea", "text": "What is the passage mainly about?", "answers": "the park, having fun at the park" }
                    ]
                },
                {
                    "audioId": "aBcR2sVj", "title": "My Room", "text": "My room is my favorite place. I have a soft bed with blue blankets. My toys are in a big red box. I have a small desk where I do my homework. It is a quiet and happy place for me.",
                    "questions": [
                        { "type": "Detail", "text": "What color are the blankets?", "answers": "blue" },
                        { "type": "Detail", "text": "Where are the toys?", "answers": "in a red box, red box" },
                        { "type": "Inference", "text": "Why does the child like their room?", "answers": "it's quiet, it's happy, it's their favorite place" },
                        { "type": "Main Idea", "text": "What is the passage about?", "answers": "my room, a child's room" }
                    ]
                }
            ],
            "4": [
                {
                    "audioId": "zX9vNqWp", "title": "The Birthday Party", "text": "It was Sam's birthday party. He had a big cake with six candles. His friends came to his house. They played games and ate cake. Sam got many presents. He was very happy.",
                    "questions": [
                        { "type": "Detail", "text": "How many candles were on the cake?", "answers": "six" },
                        { "type": "Detail", "text": "What did the children do at the party?", "answers": "played games and ate cake" },
                        { "type": "Inference", "text": "How did Sam feel on his birthday?", "answers": "happy" },
                        { "type": "Main Idea", "text": "What is this passage about?", "answers": "a birthday party" }
                    ]
                },
                {
                    "audioId": "mN6bKjH3", "title": "The Library", "text": "The library is a quiet place full of books. You can borrow books to take home. The librarian helps you find books you like. There are stories about animals, adventures, and real people. Reading is a great way to learn.",
                    "questions": [
                        { "type": "Detail", "text": "What does a librarian do?", "answers": "helps you find books" },
                        { "type": "Detail", "text": "What kind of stories are there?", "answers": "animals, adventures, real people" },
                        { "type": "Inference", "text": "Why must you be quiet in the library?", "answers": "so people can read, so you don't disturb others" },
                        { "type": "Main Idea", "text": "What is the main idea of this passage?", "answers": "about the library, what a library is" }
                    ]
                }
            ],
            "5": [
                {
                    "audioId": "sD5fG2hY", "title": "Going to the Beach", "text": "The beach is a fun place. The sand is warm and the water is cool. You can build sandcastles and find seashells. The waves make a soft, rushing sound. It's important to wear sunscreen to protect your skin from the sun.",
                    "questions": [
                        { "type": "Detail", "text": "What can you build with sand?", "answers": "sandcastles" },
                        { "type": "Detail", "text": "What makes a soft, rushing sound?", "answers": "the waves" },
                        { "type": "Inference", "text": "Why do you need sunscreen at the beach?", "answers": "to protect your skin, so you don't get a sunburn" },
                        { "type": "Main Idea", "text": "What is this passage about?", "answers": "the beach, going to the beach" }
                    ]
                },
                {
                    "audioId": "jK1lP4oT", "title": "Baking Cookies", "text": "We are baking cookies today. First, we mix flour, sugar, and eggs in a big bowl. Then, we roll the dough into little balls. We put them on a tray and bake them in the oven. The house smells so good when they are baking.",
                    "questions": [
                        { "type": "Detail", "text": "What do you mix in the bowl?", "answers": "flour, sugar, and eggs" },
                        { "type": "Detail", "text": "What do you do after mixing the dough?", "answers": "roll it into balls" },
                        { "type": "Inference", "text": "How can you tell the cookies are baking?", "answers": "the house smells good" },
                        { "type": "Main Idea", "text": "What is the passage about?", "answers": "baking cookies" }
                    ]
                }
            ],
            "6": [
                {
                    "audioId": "yU8iO7wE", "title": "The Fire Station", "text": "A fire station is where firefighters work. They have a big red truck with a long ladder. When there is a fire, they drive fast to help people. Firefighters are very brave. They practice and train to be ready for emergencies.",
                    "questions": [
                        { "type": "Detail", "text": "What color is the fire truck?", "answers": "red" },
                        { "type": "Detail", "text": "What do firefighters do?", "answers": "help people, put out fires" },
                        { "type": "Inference", "text": "Why do firefighters have to be brave?", "answers": "fires are dangerous, their job is dangerous" },
                        { "type": "Main Idea", "text": "What is the main idea of the passage?", "answers": "about fire stations, about firefighters" }
                    ]
                },
                {
                    "audioId": "eQ3rV1bN", "title": "A Visit to the Doctor", "text": "When you are sick, you go to the doctor. The doctor checks your heart with a stethoscope. They might give you medicine to help you feel better. Doctors and nurses help us stay healthy. It's important to listen to what they say.",
                    "questions": [
                        { "type": "Detail", "text": "What does the doctor use to check your heart?", "answers": "a stethoscope" },
                        { "type": "Detail", "text": "What might a doctor give you to feel better?", "answers": "medicine" },
                        { "type": "Inference", "text": "Why is it important to see a doctor when you're sick?", "answers": "to get better, to get healthy" },
                        { "type": "Main Idea", "text": "What is the passage about?", "answers": "visiting the doctor, doctors" }
                    ]
                }
            ],
            "7": [
                {
                    "audioId": "oP6tY9zC", "title": "Planting a Garden", "text": "We are planting a garden. First, we dig small holes in the dirt. Then, we put seeds in the holes and cover them up. We give the seeds water and sunshine. Soon, little green plants will start to grow.",
                    "questions": [
                        { "type": "Detail", "text": "What do you do after digging holes?", "answers": "put seeds in them" },
                        { "type": "Detail", "text": "What do seeds need to grow?", "answers": "water and sunshine" },
                        { "type": "Inference", "text": "Why do you have to wait for plants to grow?", "answers": "they start as small seeds, they need time" },
                        { "type": "Main Idea", "text": "What is the passage about?", "answers": "planting a garden" }
                    ]
                },
                {
                    "audioId": "iL0uN5xG", "title": "The Moon", "text": "At night, you can see the moon in the sky. The moon is not a star. It gets its light from the sun. Sometimes the moon looks like a big circle. Other times it looks like a sliver. The moon changes shape every night.",
                    "questions": [
                        { "type": "Detail", "text": "Where does the moon get its light?", "answers": "from the sun" },
                        { "type": "Detail", "text": "What does the moon look like sometimes?", "answers": "a big circle, a sliver" },
                        { "type": "Inference", "text": "Can you see the moon during the day?", "answers": "no, only at night" },
                        { "type": "Main Idea", "text": "What is the main idea?", "answers": "about the moon" }
                    ]
                }
            ],
            "8": [
                {
                    "audioId": "gH4jF8vR", "title": "Our Solar System", "text": "Our solar system is made of the sun and eight planets. The planets go around the sun. Earth is the planet we live on. Some planets are big, like Jupiter, and some are small, like Mercury. Each planet is different and special.",
                    "questions": [
                        { "type": "Detail", "text": "How many planets are in our solar system?", "answers": "eight" },
                        { "type": "Detail", "text": "What planet do we live on?", "answers": "Earth" },
                        { "type": "Inference", "text": "What is the biggest thing in the solar system?", "answers": "the sun" },
                        { "type": "Main Idea", "text": "What is the passage about?", "answers": "the solar system" }
                    ]
                },
                {
                    "audioId": "bC2kM7dS", "title": "The Seasons", "text": "There are four seasons in a year: spring, summer, fall, and winter. In spring, flowers bloom. In summer, it is hot. In fall, leaves change color. In winter, it is cold and might snow. Each season brings a different kind of weather.",
                    "questions": [
                        { "type": "Detail", "text": "Name the four seasons.", "answers": "spring, summer, fall, winter" },
                        { "type": "Detail", "text": "What happens in the fall?", "answers": "leaves change color" },
                        { "type": "Inference", "text": "What season would you go swimming in?", "answers": "summer" },
                        { "type": "Main Idea", "text": "What is this passage about?", "answers": "the seasons" }
                    ]
                }
            ],
            "9": [
                {
                    "audioId": "uJ1oP9eW", "title": "The Life of a Butterfly", "text": "A butterfly starts its life as an egg. Then it becomes a caterpillar. The caterpillar eats many leaves and grows big. It builds a chrysalis and rests inside. After some time, it comes out as a beautiful butterfly with colorful wings.",
                    "questions": [
                        { "type": "Detail", "text": "What does a butterfly start as?", "answers": "an egg" },
                        { "type": "Detail", "text": "What does a caterpillar build?", "answers": "a chrysalis" },
                        { "type": "Inference", "text": "Why does the caterpillar eat so much?", "answers": "to grow big, to have energy to change" },
                        { "type": "Main Idea", "text": "What is the passage about?", "answers": "the life of a butterfly, how a butterfly grows" }
                    ]
                },
                {
                    "audioId": "wE5tY3fQ", "title": "The Post Office", "text": "The post office is a place where you can mail letters and packages. A mail carrier picks them up and delivers them to people's homes. You can buy stamps at the post office. It is an important service that connects people who live far apart.",
                    "questions": [
                        { "type": "Detail", "text": "What can you buy at the post office?", "answers": "stamps" },
                        { "type": "Detail", "text": "Who delivers the mail?", "answers": "a mail carrier" },
                        { "type": "Inference", "text": "Why is the post office important?", "answers": "it connects people, helps people communicate" },
                        { "type": "Main Idea", "text": "What is the main idea of this passage?", "answers": "about the post office" }
                    ]
                }
            ],
            "10": [
                {
                    "audioId": "aV4rG7jL", "title": "The Human Body", "text": "The human body is amazing. Your brain helps you think and learn. Your heart pumps blood all through your body. Your lungs help you breathe. Your stomach helps you digest food. All the parts work together to keep you alive and healthy.",
                    "questions": [
                        { "type": "Detail", "text": "What does your brain do?", "answers": "helps you think and learn" },
                        { "type": "Detail", "text": "What pumps blood through your body?", "answers": "your heart" },
                        { "type": "Inference", "text": "Why do you need to eat food?", "answers": "to give your stomach something to digest, for energy" },
                        { "type": "Main Idea", "text": "What is the passage about?", "answers": "the human body" }
                    ]
                },
                {
                    "audioId": "fD8kS2wP", "title": "The Ocean", "text": "The ocean is a huge body of salt water. It is home to many animals, like fish, whales, and sharks. The ocean has waves that crash on the shore. Deep in the ocean, it is very dark. There is still much to discover about the ocean.",
                    "questions": [
                        { "type": "Detail", "text": "Name an animal that lives in the ocean.", "answers": "fish, whales, sharks (any one)" },
                        { "type": "Detail", "text": "What is it like deep in the ocean?", "answers": "dark" },
                        { "type": "Inference", "text": "Why is there much to discover about the ocean?", "answers": "it's huge, it's deep" },
                        { "type": "Main Idea", "text": "What is the main idea of this passage?", "answers": "about the ocean" }
                    ]
                }
            ],
            "11": [
                {
                    "audioId": "nB7hT5rE", "title": "Recycling", "text": "Recycling is important for our planet. When we recycle, we turn old things into new things. We can recycle paper, plastic, and glass. This helps save resources and keeps trash out of landfills. Everyone can help by recycling at home and school.",
                    "questions": [
                        { "type": "Detail", "text": "What are three things we can recycle?", "answers": "paper, plastic, and glass" },
                        { "type": "Detail", "text": "What does recycling save?", "answers": "resources" },
                        { "type": "Inference", "text": "Why is it bad to have a lot of trash in landfills?", "answers": "it's bad for the planet, it takes up space" },
                        { "type": "Main Idea", "text": "What is the passage about?", "answers": "recycling" }
                    ]
                },
                {
                    "audioId": "rK9lO3pA", "title": "The Five Senses", "text": "We have five senses that help us understand the world. We use our eyes to see and our ears to hear. We use our nose to smell and our tongue to taste. We use our skin to touch and feel things. Our senses give us important information.",
                    "questions": [
                        { "type": "Detail", "text": "Which sense do you use your nose for?", "answers": "smell" },
                        { "type": "Detail", "text": "Which sense do you use your skin for?", "answers": "touch" },
                        { "type": "Inference", "text": "How would your life be different if you couldn't see?", "answers": "it would be hard to get around, you couldn't read books" },
                        { "type": "Main Idea", "text": "What is the main idea of this passage?", "answers": "the five senses" }
                    ]
                }
            ],
            "12": [
                {
                    "audioId": "tY6jC1vM", "title": "The Rainforest", "text": "A rainforest is a forest that gets a lot of rain. It is hot and humid. Many different kinds of plants and animals live there. You can find monkeys, toucans, and snakes in the rainforest. The trees are very tall and form a canopy at the top.",
                    "questions": [
                        { "type": "Detail", "text": "What is the weather like in a rainforest?", "answers": "hot and humid, gets a lot of rain" },
                        { "type": "Detail", "text": "Name an animal that lives in the rainforest.", "answers": "monkeys, toucans, snakes (any one)" },
                        { "type": "Inference", "text": "Why are the trees so tall?", "answers": "to get sunlight, because there's a lot of rain" },
                        { "type": "Main Idea", "text": "What is the passage about?", "answers": "the rainforest" }
                    ]
                },
                {
                    "audioId": "qP0wE4sD", "title": "The Food Groups", "text": "It is important to eat foods from all the food groups. These are fruits, vegetables, grains, protein, and dairy. Fruits and vegetables give you vitamins. Grains give you energy. Protein helps you build strong muscles, and dairy helps you build strong bones. A balanced diet keeps you healthy.",
                    "questions": [
                        { "type": "Detail", "text": "What do grains give you?", "answers": "energy" },
                        { "type": "Detail", "text": "What does dairy help you build?", "answers": "strong bones" },
                        { "type": "Inference", "text": "What might happen if you only ate one food group?", "answers": "you wouldn't be healthy, you'd get sick" },
                        { "type": "Main Idea", "text": "What is the main idea of this passage?", "answers": "the food groups, eating healthy" }
                    ]
                }
            ],
            "13": [
                {
                    "audioId": "vC5kL9zF", "title": "The Water Cycle", "text": "The water cycle describes how water moves on Earth. The sun heats up water in rivers and oceans, and it turns into vapor. This is called evaporation. The vapor rises and forms clouds. This is condensation. When the clouds get full, the water falls back to Earth as rain or snow. This is precipitation.",
                    "questions": [
                        { "type": "Detail", "text": "What is it called when water turns into vapor?", "answers": "evaporation" },
                        { "type": "Detail", "text": "What is it called when water falls from the clouds?", "answers": "precipitation" },
                        { "type": "Inference", "text": "Where does the energy for the water cycle come from?", "answers": "the sun" },
                        { "type": "Main Idea", "text": "What is the passage about?", "answers": "the water cycle" }
                    ]
                },
                {
                    "audioId": "hJ8nB3rX", "title": "Martin Luther King Jr.", "text": "Martin Luther King Jr. was an important leader. He believed that all people should be treated fairly and equally. He worked for civil rights in a peaceful way. He gave a famous speech called \"I Have a Dream.\" We celebrate a holiday in his honor to remember his important work.",
                    "questions": [
                        { "type": "Detail", "text": "What did Martin Luther King Jr. believe?", "answers": "all people should be treated fairly and equally" },
                        { "type": "Detail", "text": "What was the name of his famous speech?", "answers": "I Have a Dream" },
                        { "type": "Inference", "text": "Why was his work so important?", "answers": "he helped change unfair laws, he fought for equality" },
                        { "type": "Main Idea", "text": "What is the passage about?", "answers": "Martin Luther King Jr." }
                    ]
                }
            ],
            "14": [
                {
                    "audioId": "eQ3vN1bP", "title": "The American Revolution", "text": "The American Revolution was a war between Great Britain and the thirteen colonies in America. The colonies wanted to be their own country, free from British rule. The war lasted for eight years. After it was over, the colonies became the United States of America. George Washington was an important general in the war.",
                    "questions": [
                        { "type": "Detail", "text": "Who fought in the American Revolution?", "answers": "Great Britain and the thirteen colonies" },
                        { "type": "Detail", "text": "What did the colonies want?", "answers": "to be their own country, to be free" },
                        { "type": "Inference", "text": "Why was George Washington important?", "answers": "he was a leader, he helped them win" },
                        { "type": "Main Idea", "text": "What is the passage about?", "answers": "the American Revolution" }
                    ]
                },
                {
                    "audioId": "uJ1oP9eW", "title": "Photosynthesis", "text": "Photosynthesis is how plants make their own food. They use sunlight, water, and a gas called carbon dioxide from the air. This process happens in the leaves of the plant. Photosynthesis creates sugar for the plant to eat and also releases oxygen into the air, which animals and people need to breathe.",
                    "questions": [
                        { "type": "Detail", "text": "What three things do plants use for photosynthesis?", "answers": "sunlight, water, and carbon dioxide" },
                        { "type": "Detail", "text": "What does photosynthesis release into the air?", "answers": "oxygen" },
                        { "type": "Inference", "text": "Why is photosynthesis important for people?", "answers": "it gives us oxygen to breathe" },
                        { "type": "Main Idea", "text": "What is the passage about?", "answers": "photosynthesis, how plants make food" }
                    ]
                }
            ],
            "15": [
                {
                    "audioId": "kLp8dFzH", "title": "The Circulatory System", "text": "The circulatory system moves blood through your body. It is made of your heart, blood vessels, and blood. The heart is a pump that pushes blood through tubes called arteries and veins. Blood carries oxygen and nutrients to all parts of your body. It also carries away waste. This system is essential for life.",
                    "questions": [
                        { "type": "Detail", "text": "What are the three parts of the circulatory system?", "answers": "heart, blood vessels, and blood" },
                        { "type": "Detail", "text": "What does blood carry to your body?", "answers": "oxygen and nutrients" },
                        { "type": "Inference", "text": "What would happen if your heart stopped pumping?", "answers": "blood would stop moving, you would die" },
                        { "type": "Main Idea", "text": "What is the main idea of this passage?", "answers": "the circulatory system" }
                    ]
                },
                {
                    "audioId": "bC2kM7dS", "title": "The Branches of Government", "text": "The United States government has three branches to share power. The legislative branch, called Congress, makes laws. The executive branch, led by the president, carries out the laws. The judicial branch, with the Supreme Court, interprets the laws. This separation of powers makes sure that no single branch becomes too powerful.",
                    "questions": [
                        { "type": "Detail", "text": "What are the three branches of government?", "answers": "legislative, executive, and judicial" },
                        { "type": "Detail", "text": "What does the legislative branch do?", "answers": "makes laws" },
                        { "type": "Inference", "text": "Why is it important to have three branches?", "answers": "to share power, so one branch isn't too powerful" },
                        { "type": "Main Idea", "text": "What is the passage about?", "answers": "the branches of government" }
                    ]
                }
            ]
        };

        const levelFiltersContainer = document.getElementById('level-filters');
        const storySelectionContainer = document.getElementById('story-selection-container');
        const beginAssessmentBtn = document.getElementById('begin-assessment-btn');
        const assessmentModal = document.getElementById('assessment-modal');
        const closeAssessmentBtn = document.getElementById('close-assessment-btn');
        const reportModal = document.getElementById('report-modal');
        const closeReportBtn = document.getElementById('close-report-btn');
        const confirmModal = document.getElementById('confirm-modal');
        const confirmOkBtn = document.getElementById('confirm-ok-btn');

        let selectedLevels = [];
        let selectedStories = [];
        let currentAudio = null;
        let currentAssessment = {
            stories: [],
            currentIndex: 0,
            scores: {}
        };
        const MAX_LEVEL_SELECTIONS = 3;
        const MAX_STORY_SELECTIONS = 5;

        // --- Initialization ---
        function init() {
            // Create Level buttons
            for (let i = 0; i <= 15; i++) {
                const level = `Level ${i}`;
                const id = `level-${i}`;
                const checkboxHTML = `
                    <div>
                        <input type="checkbox" id="${id}" value="${i}" class="level-checkbox">
                        <label for="${id}" class="filter-label block w-full text-center p-2 rounded-md border border-slate-700 bg-slate-800/60 text-slate-300 font-semibold text-sm">
                            ${level}
                        </label>
                    </div>`;
                levelFiltersContainer.innerHTML += checkboxHTML;
            }
            addEventListeners();
        }

        // --- Event Listeners ---
        function addEventListeners() {
            levelFiltersContainer.addEventListener('change', handleLevelSelection);
            storySelectionContainer.addEventListener('click', handleStorySelection);
            beginAssessmentBtn.addEventListener('click', startAssessment);
            closeAssessmentBtn.addEventListener('click', () => {
                if (currentAudio) {
                    currentAudio.pause();
                }
                assessmentModal.classList.add('hidden');
            });
            closeReportBtn.addEventListener('click', () => reportModal.classList.add('hidden'));
        }

        // --- UI Update Functions ---
        function handleLevelSelection(e) {
            if (!e.target.matches('.level-checkbox')) return;
            
            selectedLevels = Array.from(levelFiltersContainer.querySelectorAll('.level-checkbox:checked')).map(cb => cb.value);

            // Enforce max selections
            const allCheckboxes = levelFiltersContainer.querySelectorAll('.level-checkbox');
            if (selectedLevels.length >= MAX_LEVEL_SELECTIONS) {
                allCheckboxes.forEach(cb => { if (!cb.checked) cb.disabled = true; });
            } else {
                allCheckboxes.forEach(cb => cb.disabled = false);
            }
            renderStoryButtons();
        }

        function renderStoryButtons() {
            storySelectionContainer.innerHTML = '';
            selectedLevels.forEach(level => {
                const passages = passageData[level];
                if (!passages) return;

                let storyButtonsHTML = passages.map(passage => {
                    const isSelected = selectedStories.some(s => s.title === passage.title);
                    return `<button 
                                class="story-btn p-2 rounded-md border border-slate-700 bg-slate-800/60 text-slate-300 ${isSelected ? 'selected' : ''}"
                                data-level="${level}"
                                data-title="${passage.title}">
                                ${passage.title}
                            </button>`;
                }).join('');

                storySelectionContainer.innerHTML += `
                    <div class="mb-4">
                        <h4 class="text-lg font-bold text-violet-400 mb-2 border-b border-violet-900/50 pb-1">Level ${level}</h4>
                        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-2">
                            ${storyButtonsHTML}
                        </div>
                    </div>`;
            });
             // Clear selected stories that are no longer visible
            selectedStories = selectedStories.filter(story => selectedLevels.includes(story.level));
            updateBeginButtonState();
        }

        function handleStorySelection(e) {
            if (!e.target.matches('.story-btn')) return;
            const btn = e.target;
            const title = btn.dataset.title;
            const level = btn.dataset.level;

            const storyIndex = selectedStories.findIndex(s => s.title === title);

            if (storyIndex > -1) {
                // Deselect
                selectedStories.splice(storyIndex, 1);
                btn.classList.remove('selected');
            } else {
                // Select
                if (selectedStories.length < MAX_STORY_SELECTIONS) {
                    selectedStories.push({ title, level });
                    btn.classList.add('selected');
                }
            }
            updateBeginButtonState();
        }

        function updateBeginButtonState() {
            beginAssessmentBtn.disabled = selectedStories.length === 0 || selectedStories.length > MAX_STORY_SELECTIONS;
        }


        // --- Assessment Logic ---
        function startAssessment() {
            if (selectedStories.length === 0) return;
            currentAssessment.stories = selectedStories.map(s => {
                const passage = passageData[s.level].find(p => p.title === s.title);
                return {...passage, level: s.level}; // Add level to the story object
            });
            currentAssessment.currentIndex = 0;
            currentAssessment.scores = {};
            loadPassage(currentAssessment.currentIndex);
            assessmentModal.classList.remove('hidden');
        }

        function loadPassage(index) {
            const passage = currentAssessment.stories[index];
            if (!passage) return;

            document.getElementById('passage-title').textContent = `${passage.title} (Level ${passage.level})`;
            document.getElementById('passage-text').textContent = passage.text;
            
            // Stop and clear previous audio
            if (currentAudio) {
                currentAudio.pause();
                currentAudio.removeAttribute('src');
                currentAudio = null;
            }
            
            currentAudio = new Audio(audioBasePath + passage.audioId + '.wav');
            const playBtn = document.getElementById('play-btn');
            const pauseBtn = document.getElementById('pause-btn');
            const replayBtn = document.getElementById('replay-btn');
            const durationEl = document.getElementById('audio-duration');
            
            let firstPlay = true;
            
            const playAudio = () => {
                currentAudio.play();
            };

            playBtn.onclick = () => {
                if (firstPlay) {
                    confirmModal.classList.remove('hidden');
                } else {
                    playAudio();
                }
            };

            confirmOkBtn.onclick = () => {
                confirmModal.classList.add('hidden');
                firstPlay = false;
                playAudio();
            };

            pauseBtn.onclick = () => {
                currentAudio.pause();
            };

            replayBtn.onclick = () => {
                currentAudio.currentTime = 0;
                playAudio();
            };

            currentAudio.onplay = () => {
                playBtn.classList.add('hidden');
                pauseBtn.classList.remove('hidden');
            };

            currentAudio.onpause = () => {
                playBtn.classList.remove('hidden');
                pauseBtn.classList.add('hidden');
            };
            
            currentAudio.onended = () => {
                playBtn.classList.remove('hidden');
                pauseBtn.classList.add('hidden');
                firstPlay = true; // Allow confirm dialog on next play after finishing
            };

            currentAudio.onloadedmetadata = () => {
                 durationEl.textContent = `0:00 / ${formatTime(currentAudio.duration)}`;
            };
             currentAudio.ontimeupdate = () => {
                 durationEl.textContent = `${formatTime(currentAudio.currentTime)} / ${formatTime(currentAudio.duration)}`;
             };

            const questionsContainer = document.getElementById('questions-container');
            questionsContainer.innerHTML = '';
            passage.questions.forEach((q, qIndex) => {
                questionsContainer.innerHTML += `
                    <div class="mb-4 p-3 bg-slate-900/40 rounded-lg" data-q-index="${qIndex}">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="font-semibold text-slate-200">${q.text}</p>
                                <p class="text-sm text-slate-400 mt-1"><em>Acceptable: ${q.answers}</em></p>
                            </div>
                            <div class="flex gap-2 ml-4">
                                <button class="score-btn font-bold text-lg w-10 h-10 rounded-full border-2 border-green-500 text-green-500 hover:bg-green-500/20" data-score="1">1</button>
                                <button class="score-btn font-bold text-lg w-10 h-10 rounded-full border-2 border-red-500 text-red-500 hover:bg-red-500/20" data-score="0">0</button>
                            </div>
                        </div>
                    </div>
                `;
            });
            questionsContainer.onclick = handleScoreClick;
            
            document.getElementById('clinician-notes').value = currentAssessment.scores[passage.title]?.notes || '';

            const nextBtn = document.getElementById('next-submit-btn');
            if (index === currentAssessment.stories.length - 1) {
                nextBtn.textContent = 'Submit';
                nextBtn.onclick = submitAssessment;
            } else {
                nextBtn.textContent = 'Next Passage';
                nextBtn.onclick = nextPassage;
            }
        }
        
        function handleScoreClick(e) {
            if(!e.target.matches('.score-btn')) return;
            const score = e.target.dataset.score;
            const questionDiv = e.target.closest('div[data-q-index]');
            
            // remove selected from siblings
            questionDiv.querySelectorAll('.score-btn').forEach(btn => btn.classList.remove('selected', 'bg-green-500', 'bg-red-500', 'text-white'));
            
            e.target.classList.add('selected', 'text-white');
            if(score === '1') e.target.classList.add('bg-green-500');
            if(score === '0') e.target.classList.add('bg-red-500');
        }

        function collectScoresForCurrentPassage() {
             const passage = currentAssessment.stories[currentAssessment.currentIndex];
             const scores = [];
             document.querySelectorAll('#questions-container > div').forEach((qDiv, index) => {
                 const selectedBtn = qDiv.querySelector('.score-btn.selected');
                 scores[index] = selectedBtn ? parseInt(selectedBtn.dataset.score, 10) : null;
             });
             currentAssessment.scores[passage.title] = {
                 scores: scores,
                 notes: document.getElementById('clinician-notes').value,
                 passage: passage
             };
        }

        function nextPassage() {
            if (currentAudio) currentAudio.pause();
            collectScoresForCurrentPassage();
            currentAssessment.currentIndex++;
            loadPassage(currentAssessment.currentIndex);
        }

        function submitAssessment() {
            if (currentAudio) currentAudio.pause();
            collectScoresForCurrentPassage();
            generateReport();
            assessmentModal.classList.add('hidden');
            reportModal.classList.remove('hidden');
        }

        // --- Report Generation ---
        function generateReport() {
            const reportContent = document.getElementById('report-content');
            let reportHTML = '';
            let totalCorrect = 0;
            let totalQuestions = 0;

            for (const title in currentAssessment.scores) {
                const result = currentAssessment.scores[title];
                const passageLevel = result.passage.level;
                const passageCorrect = result.scores.filter(s => s === 1).length;
                const passageTotal = result.scores.length;
                totalCorrect += passageCorrect;
                totalQuestions += passageTotal;

                reportHTML += `<div class="p-4 bg-slate-800/50 rounded-lg mb-4">
                    <h3 class="text-xl font-bold text-violet-400">${title} (Level ${passageLevel})</h3>
                    <p class="font-semibold mt-2">Score: ${passageCorrect} / ${passageTotal}</p>`;
                
                if (result.notes) {
                    reportHTML += `<p class="mt-2 text-sm text-slate-400"><strong>Notes:</strong> ${result.notes}</p>`;
                }

                reportHTML += `<div class="mt-3 space-y-2">`;
                result.passage.questions.forEach((q, index) => {
                    const score = result.scores[index];
                    const scoreText = score === 1 ? 'Correct' : (score === 0 ? 'Incorrect' : 'Not Scored');
                    const scoreColor = score === 1 ? 'text-green-400' : (score === 0 ? 'text-red-400' : 'text-slate-500');
                    reportHTML += `
                        <div class="text-sm flex justify-between">
                            <span><strong>${q.type}:</strong> ${q.text}</span>
                            <span class="font-bold ${scoreColor}">${scoreText}</span>
                        </div>
                    `;
                });
                reportHTML += `</div></div>`;
            }
            
            const finalScore = totalQuestions > 0 ? ((totalCorrect / totalQuestions) * 100).toFixed(1) : 0;
            const summaryHTML = `<div class="p-4 bg-slate-900/60 rounded-lg mb-6 text-center">
                <h3 class="text-2xl font-bold text-white">Final Summative Score</h3>
                <p class="text-4xl font-extrabold text-violet-400 my-2">${finalScore}%</p>
                <p class="text-lg text-slate-300">(${totalCorrect} out of ${totalQuestions} questions correct)</p>
            </div>`;

            reportContent.innerHTML = summaryHTML + reportHTML;
        }


        // --- Utility ---
        function formatTime(seconds) {
            if (isNaN(seconds)) return "0:00";
            const min = Math.floor(seconds / 60);
            const sec = Math.floor(seconds % 60).toString().padStart(2, '0');
            return `${min}:${sec}`;
        }

        init();
    });
    </script>
</body>
</html>


