{% extends "base.html" %}

{% block title %}Navacite Library{% endblock %}

{% block head %}
    {{ super() }} <!-- This was the missing piece! It includes the parent's head content. -->
    <style>
        /* Simple transition for the update list reveal */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
{% endblock %}

{% block content %}
    <audio id="updateSound" src="https://raw.githubusercontent.com/navasdo/navacite/refs/heads/main/templates/static/audio/landing/updates.mp3" preload="auto"></audio>

    <!-- Updates Modal -->
    <div id="updatesModal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4 modal-enter" style="backdrop-filter: blur(8px);">
        <div class="bg-slate-800 border border-violet-700/50 rounded-2xl shadow-2xl shadow-violet-500/10 p-6 sm:p-8 text-center max-w-md w-full modal-content-enter">
            <img src="https://raw.githubusercontent.com/navasdo/navacite/refs/heads/main/templates/static/updates/updates.png" alt="The Scholars' Die" class="w-48 mx-auto mb-4 rounded-full [filter:drop-shadow(0_0_15px_rgba(255,255,255,0.6))]" onerror="this.onerror=null; this.src='https://placehold.co/192x192/1e293b/a78bfa?text=TSD';" />
            
            <h2 class="text-3xl font-bold text-slate-100">Latest Updates</h2>
            <p id="updateDate" class="text-sm text-violet-400 mb-6"></p>

            <div id="initialUpdateView">
                <p class="text-slate-300 italic mb-6"> The Navacites have been polished~!</p>
                <div class="flex flex-col sm:flex-row gap-3">
                    <button id="seeUpdatesButton" class="w-full bg-violet-600 hover:bg-violet-700 text-white font-bold py-3 px-4 rounded-lg transition-colors duration-300">See Updates</button>
                    <button id="closeExcitingButton" class="w-full bg-slate-600 hover:bg-slate-700 text-white font-bold py-3 px-4 rounded-lg transition-colors duration-300">Oooh, exciting! But I hate reading.</button>
                </div>
            </div>

            <div id="revealedUpdateView" class="hidden">
                <ul id="updateList" class="text-left list-disc list-inside space-y-2 text-slate-300 mb-8">
                </ul>
                <button id="finalCloseButton" class="w-full bg-violet-600 hover:bg-violet-700 text-white font-bold py-3 px-4 rounded-lg transition-colors duration-300">Close</button>
            </div>
            
            <div class="text-center mt-6">
                <label for="dontShowAgainCheckbox" class="text-xs text-slate-400 flex items-center justify-center cursor-pointer">
                    <input type="checkbox" id="dontShowAgainCheckbox" class="mr-2 h-4 w-4 rounded bg-slate-700 border-slate-600 text-violet-600 focus:ring-violet-500">
                    Don't show this update again, please & thank you.
                </label>
            </div>
        </div>
    </div>

    <div class="w-full max-w-5xl mx-auto">
        <header class="text-center pt-8 my-8">
            <img
              src="https://raw.githubusercontent.com/navasdo/navacite/refs/heads/main/templates/static/navacite-images/Navacite-Main.png"
              alt="Navacite Main Visual"
              class="w-48 mx-auto mb-4 [filter:drop-shadow(0_0_15px_rgba(255,255,255,0.3))]"
              onerror="this.onerror=null; this.src='https://placehold.co/192x108/0c0a18/a78bfa?text=Navacite-Main';"
            />
            <div class="flex justify-center items-center gap-x-2 mb-3">
                <h1 class="text-5xl md:text-6xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-violet-400 to-fuchsia-500">
                  Navacite Library
                </h1>
                <a href="#navacite-definition" class="text-slate-500 hover:text-violet-400 transition-colors duration-300" aria-label="Scroll to definition" title="What is a Navacite?">
                   <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                     <path stroke-linecap="round" stroke-linejoin="round" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                   </svg>
                </a>
            </div>
            <p class="text-md md:text-lg text-slate-400 italic max-w-3xl mx-auto">
              A Repository of Speech-Language Therapy Related Web Apps.
            </p>
        </header>
        <main class="w-full max-w-5xl mx-auto flex-grow">
            <div class="mt-16 grid grid-cols-1 md:grid-cols-2 gap-10 p-4">
                <a href="/language-tools" class="group relative flex flex-col items-center justify-center p-8 bg-slate-900/40 rounded-2xl border border-violet-900/80 transition-all duration-300 ease-in-out hover:border-violet-600/80 hover:scale-105 hover:shadow-[0_0_25px_-5px_rgba(167,139,250,0.4)]">
                    <img src="https://raw.githubusercontent.com/navasdo/navacite/refs/heads/main/templates/static/navacite-images/navacite-languagev2.png" alt="Language Tools Icon" class="w-64 h-64 mb-4 transition-transform duration-300 group-hover:scale-110 [filter:drop-shadow(0_0_15px_rgba(255,255,255,0.3))]">
                    <h2 class="text-3xl font-bold text-slate-200 group-hover:text-violet-400 transition-colors duration-300">Language</h2>
                    <p class="text-slate-400 mt-2 text-center">Tools for writing, reading, comprehension, and more.</p>
                </a>
                 <a href="/fluency-tools" class="group relative flex flex-col items-center justify-center p-8 bg-slate-900/40 rounded-2xl border border-violet-900/80 transition-all duration-300 ease-in-out hover:border-violet-600/80 hover:scale-105 hover:shadow-[0_0_25px_-5px_rgba(167,139,250,0.4)]">
                     <img src="https://raw.githubusercontent.com/navasdo/navacite/refs/heads/main/templates/static/navacite-images/navacite-fluency.png" alt="Fluency Tools Icon" class="w-64 h-64 mb-4 transition-transform duration-300 group-hover:scale-110 [filter:drop-shadow(0_0_15px_rgba(255,255,255,0.3))]">
                    <h2 class="text-3xl font-bold text-slate-200 group-hover:text-violet-400 transition-colors duration-300">Fluency</h2>
                    <p class="text-slate-400 mt-2 text-center">Tools for promoting smooth and confident speech.</p>
                </a>
                <a href="/articulation-tools" class="group relative flex flex-col items-center justify-center p-8 bg-slate-900/40 rounded-2xl border border-violet-900/80 transition-all duration-300 ease-in-out hover:border-violet-600/80 hover:scale-105 hover:shadow-[0_0_25px_-5px_rgba(167,139,250,0.4)]">
                     <img src="https://raw.githubusercontent.com/navasdo/navacite/refs/heads/main/templates/static/navacite-images/navacite-artic.png" alt="Articulation Tools Icon" class="w-64 h-64 mb-4 transition-transform duration-300 group-hover:scale-110 [filter:drop-shadow(0_0_15px_rgba(255,255,255,0.3))]">
                    <h2 class="text-3xl font-bold text-slate-200 group-hover:text-violet-400 transition-colors duration-300">Articulation</h2>
                    <p class="text-slate-400 mt-2 text-center">Tools for speech sound production and clarity.</p>
                </a>
                 <a href="/cognition-tools" class="group relative flex flex-col items-center justify-center p-8 bg-slate-900/40 rounded-2xl border border-violet-900/80 transition-all duration-300 ease-in-out hover:border-violet-600/80 hover:scale-105 hover:shadow-[0_0_25px_-5px_rgba(167,139,250,0.4)]">
                     <img src="https://raw.githubusercontent.com/navasdo/navacite/refs/heads/main/templates/navacite-images/navacite-cognition.png" alt="Cognition Tools Icon" class="w-64 h-64 mb-4 transition-transform duration-300 group-hover:scale-110 [filter:drop-shadow(0_0_15px_rgba(255,255,255,0.3))]">
                    <h2 class="text-3xl font-bold text-slate-200 group-hover:text-violet-400 transition-colors duration-300">Cognition</h2>
                    <p class="text-slate-400 mt-2 text-center">Tools for executive functioning and cognitive flexibility.</p>
                </a>
                <a href="/slp-tools" class="group relative flex flex-col items-center justify-center p-8 bg-slate-900/40 rounded-2xl border border-violet-900/80 transition-all duration-300 ease-in-out hover:border-violet-600/80 hover:scale-105 hover:shadow-[0_0_25px_-5px_rgba(167,139,250,0.4)]">
                     <img src="https://raw.githubusercontent.com/navasdo/navacite/refs/heads/main/templates/static/navacite-images/navacite-slp.png" alt="SLP Tools Icon" class="w-64 h-64 mb-4 transition-transform duration-300 group-hover:scale-110 [filter:drop-shadow(0_0_15px_rgba(255,255,255,0.3))]">
                    <h2 class="text-3xl font-bold text-slate-200 group-hover:text-violet-400 transition-colors duration-300">SLP Tools</h2>
                    <p class="text-slate-400 mt-2 text-center">Clerical tools for speech-language pathologists.</p>
                </a>
            </div>
        </main>

        <div id="navacite-definition" class="w-full max-w-3xl mx-auto mt-24 mb-8 text-left text-sm text-slate-500 p-6 border-t border-slate-800/50 scroll-mt-20">
            <dl>
                <dt class="text-lg font-bold text-slate-300">Navacite<span class="ml-3 font-normal text-slate-400">na·va·cite | /ˈnævəˌsaɪt/</span></dt>
                <dd class="italic text-slate-400 mt-2">noun</dd>
                <dd class="mt-2 text-slate-400 leading-relaxed">1. An enchanted artifact that, in the hands of a speech-pathologist, causes keyboards to type attendance notes on their own, places every language at their fingertips, and summons the very spirits of authors to weave stories for their students.</dd>
                <dd class="mt-2 text-slate-400 leading-relaxed">2. A tool, framework, or conceptual instrument that is used to reveal or bring clarity to complex information, particularly in educational or diagnostic contexts.</dd>
                <dd class="mt-4 text-slate-500 italic"><span class="font-semibold text-slate-400 not-italic">USAGE</span><br/>"With a Navacite in hand, the SLP watched in awe as the spirits of classic authors crafted a perfect narrative prompt for the student's therapy session."</dd>
            </dl>
        </div>
    </div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- Configuration for Updates ---
        const updatesConfig = {
            id: '2025-09-14-v1',
            date: '09/14/2025', // Just the date string
            items: [
                 '<span class="text-violet-600"><b><u>[NEW APP !]</u></b></span><br><i>A new Navacite has been found~!</i><br>',
                '<b>Cochlea Compass:</b> Boost comprehension: listen once, recall details, predict what’s next!'
            ]
        };

        // --- Updates Modal Logic ---
        const modal = document.getElementById('updatesModal');
        const checkbox = document.getElementById('dontShowAgainCheckbox');
        const updateSound = document.getElementById('updateSound');
        
        const initialView = document.getElementById('initialUpdateView');
        const revealedView = document.getElementById('revealedUpdateView');

        const seeUpdatesButton = document.getElementById('seeUpdatesButton');
        const closeExcitingButton = document.getElementById('closeExcitingButton');
        const finalCloseButton = document.getElementById('finalCloseButton');

        const updateDateEl = document.getElementById('updateDate');
        const updateListEl = document.getElementById('updateList');

        const lastSeenUpdateId = localStorage.getItem('lastSeenUpdateId');

        function revealUpdates() {
            updateSound.play().catch(error => {
                console.log("Audio autoplay was prevented by the browser.");
            });
            
            initialView.classList.add('hidden');
            revealedView.classList.remove('hidden');
            revealedView.classList.add('fade-in');
        }

        function showModal() {
            updateDateEl.textContent = updatesConfig.date;
            updateListEl.innerHTML = updatesConfig.items.map(item => `<li>${item}</li>`).join('');

            modal.classList.remove('hidden');
            setTimeout(() => {
                modal.classList.add('modal-enter-active');
                modal.querySelector('.modal-content-enter').classList.add('modal-content-enter-active');
            }, 10);
        }

        function hideModal() {
            if (checkbox.checked) {
                localStorage.setItem('lastSeenUpdateId', updatesConfig.id);
            }
            modal.classList.add('hidden');
            modal.classList.remove('modal-enter-active');
            modal.querySelector('.modal-content-enter').classList.remove('modal-content-enter-active');
        }

        if (updatesConfig.id !== lastSeenUpdateId) {
            showModal();
        }
        
        seeUpdatesButton.addEventListener('click', revealUpdates);
        closeExcitingButton.addEventListener('click', hideModal);
        finalCloseButton.addEventListener('click', hideModal);

        modal.addEventListener('click', (event) => {
            if (event.target === modal) {
                hideModal();
            }
        });
    });
</script>
{% endblock %}
